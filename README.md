# Language Detection
Language detection using 'Roberta' from HuggingFace with FastAPI as the backend. 

# Setup
- Install all dependencies, run `pip install -r requirements.txt` or `install.sh` 
  - OR, 
    - Create `python -m venv .env` virtual env
    - run `activate_env_linux.sh`(if using linux) or `activate_env_windows.bat`
    - then install all the dependencies
- Run `run_server.sh` to consume/test rest endpoints

# Validations
## Input 
There are 3 input validations

- Remove all `html markup`
- Remove all `non-ascii and digits`
- Remove all `whitespaces`
  

# Tests
## Model Unit Tests
- Run `python local_detector_test.py` to test the model with some test data

## API Unit Tests
- Run `pytest` or `run_tests.sh` to test the rest API endpoints

## API Docs & Specifications
 All docs & specs are automatically generated by Swagger or ReDoc built-in within FastAPI.

API Docs / Live Test
 - To check `Swagger` use `/docs`
 - To check `Redoc` use `/redoc`
  
API Specification
- Autogenerates `OpenAPI` based spec file
  - Can be checked at `/openapi.json`

# Model
## Why use a pre-trained model?
Never reinvent the wheel, also save resources. Second, I do not own a workstation to train a model as big as 'xlm roBERTa'.

## GPU Support
No, as the project is a small demo and will be hosted on free resources

## Model & Supported Languages
Model is [xlm-roberta-base-language-detection](https://huggingface.co/papluca/xlm-roberta-base-language-detection`) model from HuggingFace. Which is a fine tuned version of [xlm-roberta-base](https://huggingface.co/xlm-roberta-base) trained on [Language ID Dataset](https://huggingface.co/datasets/papluca/language-identification#additional-information).

As of now used model supports the following 20 languages.

```
{
  "languages": {
    "ar": "Arabic",
    "bg": "Bulgarian",
    "de": "German",
    "re": "Modern",
    "en": "English",
    "es": "Spanish",
    "fr": "French",
    "hi": "Hindi",
    "it": "Italian",
    "ja": "Japanese",
    "nl": "Dutch",
    "pl": "Polish",
    "pt": "Portuguese",
    "ru": "Russian",
    "sw": "Swahili",
    "th": "Thai",
    "tr": "Turkish",
    "ur": "Urdu",
    "vi": "Vietnamese",
    "zh": "Chinese"
  },
  "count": "20"
}
```

# Flow

- User makes `POST` call to `/lang_id`
  - "Json"  input
  - "text" key with your input text
    - `{"text": "Le parole est l\u0027ombre du fait"}`
  
- Input is validated (check section `Validation` for more details)
  - If `empty` or `null`, throw `BadRequest`
  - else, return `detection results`

## Author
[Hey24sheep](https://hey24sheep.com)


